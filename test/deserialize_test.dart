import 'package:bitcoin_base/src/bitcoin/script/transaction.dart';
import 'package:test/test.dart';

void main() {
  _decodeTx();
}

void _decodeTx() {
  test('decode transaction', () {
    const data =
        '020000000186389e3142effb82e00d38abc93ef856e543221ca6dd7d916760e0cda49f059300000000fd57030047304402204335c0185a9277c531315d0cd6c83bbe8d60d39f1b93864d9a4e67c8cccb400802207813732324a0cccf3989b4c56554bf06eaeea9175557525532926de939cfac3c414730440220515367fed3284a5469489c27fc7ea1915e7a07a939fb56d2188e5a27813b87690220578a491532d4bc84756fb489c2a5093b9f6884cfe852f2b469a89c7e35482ac0414730440220594f4cf6da2c88e430d1cc00d3b9b47b2936a9c4121be1c0e2e3b634e060c58202202c340707cc66aa27bd8fe40d9993751a0efa805b021f861fad460343b2826d4841473044022001c8e211117d20ecd3b3d7359e96485015303b4f55ba3039e40f1e035d867c2f02203c43c3e3f48a8215cb99a22b95d4d99defed9e385dbbacc4501c9c6fbc7db50141473044022000e95343e11b6765aa823c58c4fd1b78495b0a29f3fb428886ce858850827e6d02206bb967529a3289397e7c0482c063d872bc839306940b9e36e35457d840f2bfef4147304402200475c3a062644cf26269c91524cece25ff95cde8cbf52c7f180c1f7e45092fcf02207c4f4449aa69de7e8ae5825375825f5175462766e17bd1d7f96b5096f2d6ae004147304402201339113915d56209270d3be2c91ca0c04392db726a4909026924cce6236444310220476c5c6a8cdb6f973b62dad12b95a651269ad74cf767d5100d88ea98309ff9c4414730440220628dcdc3b1ed6e85d6df25c976fa09488b73e1d81f4ef80d02fcbfd852fd88a00220264ba1fc4fc6d92246f3a3511f76871954aee360c7e2e407dc317736fe910df6414d1301582102b509e03e5773ad6864d037eb1c8f9e9c39698bc5b59272d7f2156da2070d810f210369cc1b70ded5caf25b42b59ae13bdbee386e5dcaa0612a2a258dec02364040682103d850292f0e06a8e64c569a23cb310d192d4ad1b145c7050c6cb23bd9e8a4310421024fa5bd6af09db2740c39ec3e795eab200f091029b65d9013f7d3b52eb1cbc6e0210205a9f0be6d7f598c9a3b06cca6223705b49a43f5de5401eef93ee8c48ddf34b42103aaf256cb145aef9bea0bad969ca498108da7a3ad6da7cdeadcbcade2aa64fcea2103cb2ce8e4c87f7a6184abb30bf21cfb987634959f67bf20336d4208f4d7d62ac52103515a9b03688488850dd184e9229cb43634c1a39e2ccc5b8f2cf2c0a8cebb92e858aeffffffff0284030000000000001976a914e54b088d7f501604b1d85ed9d30f46b5db721ac288acc71c00000000000017a91492b98234f58410b0cea227d6e7e60ec08aa8547e8700000000';
    final tx = BtcTransaction.fromRaw(data);
    expect(tx.serialize(), data);
  });
  test('decode transaction 2', () {
    const data =
        '0200000000010b78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d356470000000000ffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d356470100000000ffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d3564702000000484730440220759a2beb31cbc0bfb30ad3cff3f3c84869b6549984ac8f5413bae19b0fed3aed022036718ddc6bbd7c7921d922fe90e7786ef67818208e268507dea99c782a578e1301ffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d356470300000000ffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d35647040000008a47304402202846a5ca5766a4ef0246e59cf11bfd0a182b5ce4fe366e43480df48efe92465f022005a47fdbefa0aa971d8804606362866bcf6d0c2bf8e4ecd0c31d04e7e28d4b7e0141042f1b310f4c065331bc0d79ba4661bb9822d67d7c4a1b0a1892e1fd0cd23aa68d2518d05511d46fc76b5bd2f94625b811df220f825786208cc5b5cca23de230ccffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d3564705000000a447304402203cdbff5392666f0d5bd364c9b83053e3b7508727102cba2f2110136359fd717402205069298f860fbd84f9b60466535c9ca226d92eaf9bf298c97df7f20b758248590141041a7a569e91dbf60581509c7fc946d1003b60c7dee85299538db6353538d59574b4e89d60c7d584d084632d296f125f165b4df8e061a49daeba51d36133d03e1a1976a914c880e94561d70cb61f2108deff2f1a6c10fff6a488acffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d3564706000000a447304402202e5f50e724c564dd1dde5cbad5ed87a803beb1b3f0a1401f3d5ee4a7e1ec9ed2022005efbc073f4862625923c68ac15a830b00f01a7e40fdebe7979528782a8c64180141041a7a569e91dbf60581509c7fc946d1003b60c7dee85299538db6353538d59574b4e89d60c7d584d084632d296f125f165b4df8e061a49daeba51d36133d03e1a1976a914c880e94561d70cb61f2108deff2f1a6c10fff6a488acffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d3564707000000232200209e7470b3013d2e9585f2009241f223beaefc8067f82a2a6f2dd87d74cb5969dbffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d35647080000008c473044022013608955698454f9eff9708cb98f2ff97d3a4d4ab9f8a80996d57a861ae712970220347ad5bca2e6773fb1fc817cd12bac451cfedae8f024e67e8fac905eaa2601370143410499c2aa85d2b21a62f396907a802a58e521dafd5bddaccbd72786eea189bc4dc9c40c3728b587c47395ce41a2afe84ee70016fafa39d3b54e66fc1f11aefda704acffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d3564709000000fd410400473044022062c412f612e08ed3cf5ce5aba3c8e556849a2ffdded9814525393bd4b61c76890220638557c4426a83012b0cf31fccd395c9a063f01942dcdadf5c86b174fceaffbe0147304402206bec40f5bb548e6f0e2c8b6ffe24d1173f60b1ebb0a870cef941e8499d34c9ae02204206d61ecdfd2aa0a300f91dafd9e7399f22bee9298d56d972e0d58e366977fe01473044022050f449a88e32850924a1d19ab9b82f676d2859ec38765d13b0a08902eb8bb95b02203c1bbc81ad3af940470cd100e4bf59bd92570d0dc8b76bf6196a90c8a528520a0147304402205e8e6937d25e139762ca57d4e4777e28bbd730cde2cd72d16b7f73eca04df84d022011141ef7b64b3b10ae9fc1c78c73453c1855ff997c05b2aed56ee24ee53a789f01473044022046c8000f5c97f5e8b388e6294db4ebd8cb45f4c58f844003ed571ee8b5965a6e02202f2880e91746bcf240a6cf1945de81016f6c46cb95265e67289611e1eaaffbd00147304402204610acecbda4763c3d7bcf3e656a1cdb1f0e6286dff755b36640c52d5153011b0220785bb66ff9e36d9de663379d520858d340c66845c3f9c7b4bfd4843bf6c2fc0f01473044022007c91bb30021f4b2d84ca5cc18458aeb6ee96d9d5881d09a37af845524d3ff10022068ffdca9828bc4648cdb954bd76436b373a3da07c376452325e52a01075e7b2201473044022007c91bb30021f4b2d84ca5cc18458aeb6ee96d9d5881d09a37af845524d3ff10022068ffdca9828bc4648cdb954bd76436b373a3da07c376452325e52a01075e7b2201473044022007c91bb30021f4b2d84ca5cc18458aeb6ee96d9d5881d09a37af845524d3ff10022068ffdca9828bc4648cdb954bd76436b373a3da07c376452325e52a01075e7b22014db5015941040f0fb9a244ad31a369ee02b7abfbbb0bfa3812b9a39ed93346d03d67d412d1777965c382f55222a9aed59cb8affc64bb5381f065eab9ef3baa57f2f0ac6bfae921022f1b310f4c065331bc0d79ba4661bb9822d67d7c4a1b0a1892e1fd0cd23aa68d210299c2aa85d2b21a62f396907a802a58e521dafd5bddaccbd72786eea189bc4dc921021a7a569e91dbf60581509c7fc946d1003b60c7dee85299538db6353538d595742103a92c9b7cac68758de5783ed8e5123598e4ad137091e42987d3bad8a08e35bf3d21034f355bdcb7cc0af728ef3cceb9615d90684bb5b2ca5f859ab0f0b704075871aa41046360e856310ce5d294e8be33fc807077dc56ac80d95d9cd4ddbd21325eff73f7eb1c2784a65901538479361e94c0a2597973adef0836a6a7eddf50b7997c88a341046360e856310ce5d294e8be33fc807077dc56ac80d95d9cd4ddbd21325eff73f7eb1c2784a65901538479361e94c0a2597973adef0836a6a7eddf50b7997c88a341046360e856310ce5d294e8be33fc807077dc56ac80d95d9cd4ddbd21325eff73f7eb1c2784a65901538479361e94c0a2597973adef0836a6a7eddf50b7997c88a359aeffffffff78c2ebf52b849090b70ba2bb3ec4a4447037ab41e56781f44f7cae3d82d356470a000000484730440220028b766844f8d4e5c28b2464605dfa79435c9203481976db468517ca96674b320220761f5687ce7d6067ba3cbe652e11b8495ac274b5ce0e7f1b8f59b2c34f007bf701ffffffff0be803000000000000160014b4bd9b543a615fe9b73ced34a9a38572ae18a395e8030000000000002200209e7470b3013d2e9585f2009241f223beaefc8067f82a2a6f2dd87d74cb5969dbe8030000000000004341040f0fb9a244ad31a369ee02b7abfbbb0bfa3812b9a39ed93346d03d67d412d1777965c382f55222a9aed59cb8affc64bb5381f065eab9ef3baa57f2f0ac6bfae9ace80300000000000022512039d1075e641ac7deda75bfbfa28aa5c65d7f39b1315e024f62e1064b1ec71d3ee8030000000000001976a914f9c4fccde68b163563e0d60842d1accd19c1207b88ace80300000000000017a91454db4f9a5c6f2de3110925e1f8cf42aeab807e6687e80300000000000017a91454db4f9a5c6f2de3110925e1f8cf42aeab807e6687e80300000000000017a914baf6af81b991265c3e3223f4649cf1b21afa73b987e80300000000000017a914c95d7440311017931c7adb20ab103e116e17ccbb87e80300000000000017a914d6215d5c57d6d65ae73eb0d8fe2ad7cfa07d441f879ba80000000000004341040f0fb9a244ad31a369ee02b7abfbbb0bfa3812b9a39ed93346d03d67d412d1777965c382f55222a9aed59cb8affc64bb5381f065eab9ef3baa57f2f0ac6bfae9ac02473044022044cd5a0eca8585d1dfb183dc12b37bfb41308244540d6a6ba449b6663f85f5e402206221b9980ecc54538e249a1c01972c6198c150945d12b6d124ebe523bd7bd2c30121021a7a569e91dbf60581509c7fc946d1003b60c7dee85299538db6353538d595740300473044022010b9f2310bc25214db7508df0107c8683c7c2f3eabb60aad2c35bed84d516159022059a643ad81a966716db06a2d707fefb234bffcac975ece1bc4b900239b50b7e501255121031d16453b3ab3132acb0a5bc16cc49690d819a585267a15cd5a064e2a0ad4059951ae000140daf8270bffc7a39c45114f5b180f5f82bc920803f3a612a4b517ce609e7e4ef30d8939102af08c9407f0cc4f9c63ffdda9914634dc59b1786d6d6b9d1b8a31960000000300473044022058f436dd9dc7d2966cd44a52989c972fb67e017d02e08723293fcfc4a3da3bff02200f8ff1bb6a95709ed5cfc47e9f567cba1fca8c9c10cd2db4f348152b3420361001255121031d16453b3ab3132acb0a5bc16cc49690d819a585267a15cd5a064e2a0ad4059951ae00000000000000';
    final tx = BtcTransaction.fromRaw(data);
    expect(tx.serialize(), data);
  });
}
